<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="Experiences studies are an integral component of the actuarial 
    control cycle. Regardless of the decrement or policyholder behavior of 
    interest, the analyses conducted is often the same. Ultimately, this 
    package aims to reduce time spent writing the same code used for 
    different experience studies, therefore increasing the time for to uncover
    new insights inherit within the relevant experience.">
<title>Tools for Actuarial Experience Studies â€¢ expstudy</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="apple-touch-icon-60x60.png">
<script src="deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="pkgdown.js"></script><meta property="og:title" content="Tools for Actuarial Experience Studies">
<meta property="og:description" content="Experiences studies are an integral component of the actuarial 
    control cycle. Regardless of the decrement or policyholder behavior of 
    interest, the analyses conducted is often the same. Ultimately, this 
    package aims to reduce time spent writing the same code used for 
    different experience studies, therefore increasing the time for to uncover
    new insights inherit within the relevant experience.">
<meta property="og:image" content="https://cb12991.github.io/expstudy/logo.png">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="index.html">expstudy</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">2.0.0.9000</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="reference/index.html">Reference</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="news/index.html">Changelog</a>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/cb12991/expstudy/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-home">
<div class="row">
  <main id="main" class="col-md-9"><div class="section level1">
<div class="page-header">
<img src="logo.png" class="logo" alt=""><h1 id="expstudy-">expstudy 
<a class="anchor" aria-label="anchor" href="#expstudy-"></a>
</h1>
</div>
<!-- badges: start -->

<p>The goal of expstudy is to provide a set of tools to quickly conduct analysis of an experience study. Commonly used techniques (such as actual-to-expected analysis) are generalized and streamlined so that repetitive coding is avoided.</p>
<p>Most analyses for an experience study is structured around <em>measures</em> for a particular decrement of interest, e.g., the number of policy surrenders for a surrender experience study. For any given decrement of interest, the following measures are commonly utilized:</p>
<ul>
<li>
<strong>Actuals</strong>: the actual decrement count (or amount) observed</li>
<li>
<strong>Exposures</strong>: the number of policies or the face amount of insurance exposed to the decrement of interest</li>
<li>
<strong>Expecteds</strong>: the expected decrement count or amount per unit of exposure</li>
<li>
<strong>Variances</strong>: the expectation variance of an underlying assumption for the expecteds of the study (used primarily for confidence intervals and credibility scores)</li>
</ul>
<p>expstudy provides functions to recognize or identify study measures so that the routine analyses can be streamlined.</p>
</div>
<div class="section level1">
<h1 id="installation">Installation<a class="anchor" aria-label="anchor" href="#installation"></a>
</h1>
<p>expstudy is published to CRAN so you can download directly from any CRAN mirror:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">'expstudy'</span><span class="op">)</span></span></code></pre></div>
<div class="section level2">
<h2 id="development-version">Development version<a class="anchor" aria-label="anchor" href="#development-version"></a>
</h2>
<p>To get a bug fix or to use a feature from the development version, you can install the development version of expstudy from GitHub.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Uncomment below if you do not have pak installed yet.</span></span>
<span><span class="co"># install.packages('pak')</span></span>
<span><span class="fu">pak</span><span class="fu">::</span><span class="fu"><a href="https://pak.r-lib.org/reference/pak.html" class="external-link">pak</a></span><span class="op">(</span><span class="st">'cb12991/expstudy'</span><span class="op">)</span></span></code></pre></div>
</div>
</div>
<div class="section level1">
<h1 id="usage">Usage<a class="anchor" aria-label="anchor" href="#usage"></a>
</h1>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/cb12991/expstudy" class="external-link">expstudy</a></span><span class="op">)</span></span></code></pre></div>
<p>This package provides a sample mortality experience study to aid with examples:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://pillar.r-lib.org/reference/glimpse.html" class="external-link">glimpse</a></span><span class="op">(</span><span class="va">mortexp</span><span class="op">)</span></span>
<span><span class="co">#&gt; Rows: 176,096</span></span>
<span><span class="co">#&gt; Columns: 23</span></span>
<span><span class="co">#&gt; $ AS_OF_DATE            &lt;date&gt; 1998-04-30, 1998-05-31, 1998-06-30, 1998-07-31,â€¦</span></span>
<span><span class="co">#&gt; $ POLICY_HOLDER         &lt;fct&gt; PH_0001, PH_0001, PH_0001, PH_0001, PH_0001, PH_â€¦</span></span>
<span><span class="co">#&gt; $ GENDER                &lt;fct&gt; FEMALE, FEMALE, FEMALE, FEMALE, FEMALE, FEMALE, â€¦</span></span>
<span><span class="co">#&gt; $ SMOKING_STATUS        &lt;fct&gt; NON-SMOKER, NON-SMOKER, NON-SMOKER, NON-SMOKER, â€¦</span></span>
<span><span class="co">#&gt; $ UNDERWRITING_CLASS    &lt;fct&gt; STANDARD, STANDARD, STANDARD, STANDARD, STANDARDâ€¦</span></span>
<span><span class="co">#&gt; $ FACE_AMOUNT           &lt;dbl&gt; 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, â€¦</span></span>
<span><span class="co">#&gt; $ INSURED_DOB           &lt;date&gt; 1977-01-20, 1977-01-20, 1977-01-20, 1977-01-20,â€¦</span></span>
<span><span class="co">#&gt; $ ISSUE_DATE            &lt;date&gt; 1998-04-02, 1998-04-02, 1998-04-02, 1998-04-02,â€¦</span></span>
<span><span class="co">#&gt; $ TERMINATION_DATE      &lt;date&gt; 2013-08-08, 2013-08-08, 2013-08-08, 2013-08-08,â€¦</span></span>
<span><span class="co">#&gt; $ ISSUE_AGE             &lt;dbl&gt; 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, â€¦</span></span>
<span><span class="co">#&gt; $ ATTAINED_AGE          &lt;dbl&gt; 22, 22, 22, 22, 22, 22, 22, 22, 22, 23, 23, 23, â€¦</span></span>
<span><span class="co">#&gt; $ EXPECTED_MORTALITY_RT &lt;dbl&gt; 0.01020408, 0.01020408, 0.01020408, 0.01020408, â€¦</span></span>
<span><span class="co">#&gt; $ POLICY_DURATION_YR    &lt;dbl&gt; 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 2, 2, 2, 2, â€¦</span></span>
<span><span class="co">#&gt; $ POLICY_DURATION_MNTH  &lt;int&gt; 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 1â€¦</span></span>
<span><span class="co">#&gt; $ POLICY_STATUS         &lt;fct&gt; SURRENDERED, SURRENDERED, SURRENDERED, SURRENDERâ€¦</span></span>
<span><span class="co">#&gt; $ MORT_EXPOSURE_CNT     &lt;dbl&gt; 0.07671233, 0.08219178, 0.07945205, 0.08219178, â€¦</span></span>
<span><span class="co">#&gt; $ MORT_EXPOSURE_AMT     &lt;dbl&gt; 383.5616, 410.9589, 397.2603, 410.9589, 410.9589â€¦</span></span>
<span><span class="co">#&gt; $ MORT_ACTUAL_CNT       &lt;dbl&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, â€¦</span></span>
<span><span class="co">#&gt; $ MORT_ACTUAL_AMT       &lt;dbl&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, â€¦</span></span>
<span><span class="co">#&gt; $ MORT_EXPECTED_CNT     &lt;dbl&gt; 0.0007827789, 0.0008386916, 0.0008107353, 0.0008â€¦</span></span>
<span><span class="co">#&gt; $ MORT_EXPECTED_AMT     &lt;dbl&gt; 3.913894, 4.193458, 4.053676, 4.193458, 4.193458â€¦</span></span>
<span><span class="co">#&gt; $ MORT_VARIANCE_CNT     &lt;dbl&gt; 0.0007821661, 0.0008379882, 0.0008100780, 0.0008â€¦</span></span>
<span><span class="co">#&gt; $ MORT_VARIANCE_AMT     &lt;dbl&gt; 19554.15, 20949.71, 20251.95, 20949.71, 20949.71â€¦</span></span></code></pre></div>
<p>Assumptions within an experience study are often evaluated via actual-to-expected (AE) ratios. The aggregate assumption performance can be reviewed by totaling up the actuals and dividing by the total expecteds to produce the AE ratio. An AE ratio close to 100% signifies the expectation using the underlying assumption reflects actual policyholder behavior observed in experience.</p>
<p>Calculating the aggregate AE ratio without expstudy (with the help of the tidyverse/dplyr package) is shown below:</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span><span class="op">)</span></span>
<span><span class="va">mortexp</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html" class="external-link">summarise</a></span><span class="op">(</span></span>
<span>    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/across.html" class="external-link">across</a></span><span class="op">(</span></span>
<span>      .cols <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span></span>
<span>        <span class="va">MORT_EXPOSURE_CNT</span>, <span class="va">MORT_ACTUAL_CNT</span>, <span class="va">MORT_EXPECTED_CNT</span>, </span>
<span>        <span class="va">MORT_VARIANCE_CNT</span>, <span class="va">MORT_EXPOSURE_AMT</span>, <span class="va">MORT_ACTUAL_AMT</span>, </span>
<span>        <span class="va">MORT_EXPECTED_AMT</span>, <span class="va">MORT_VARIANCE_AMT</span></span>
<span>      <span class="op">)</span>,</span>
<span>      .fns <span class="op">=</span> \<span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html" class="external-link">sum</a></span><span class="op">(</span><span class="va">x</span>, na.rm <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span>    <span class="op">)</span></span>
<span>  <span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span></span>
<span>    CNT_AE_RATIO <span class="op">=</span> <span class="va">MORT_ACTUAL_CNT</span> <span class="op">/</span> <span class="va">MORT_EXPECTED_CNT</span>,</span>
<span>    AMT_AE_RATIO <span class="op">=</span> <span class="va">MORT_ACTUAL_AMT</span> <span class="op">/</span> <span class="va">MORT_EXPECTED_AMT</span></span>
<span>  <span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="va">glimpse</span></span>
<span><span class="co">#&gt; Rows: 1</span></span>
<span><span class="co">#&gt; Columns: 10</span></span>
<span><span class="co">#&gt; $ MORT_EXPOSURE_CNT &lt;dbl&gt; 14295.43</span></span>
<span><span class="co">#&gt; $ MORT_ACTUAL_CNT   &lt;dbl&gt; 315</span></span>
<span><span class="co">#&gt; $ MORT_EXPECTED_CNT &lt;dbl&gt; 256.4227</span></span>
<span><span class="co">#&gt; $ MORT_VARIANCE_CNT &lt;dbl&gt; 255.9583</span></span>
<span><span class="co">#&gt; $ MORT_EXPOSURE_AMT &lt;dbl&gt; 210257356</span></span>
<span><span class="co">#&gt; $ MORT_ACTUAL_AMT   &lt;dbl&gt; 4650000</span></span>
<span><span class="co">#&gt; $ MORT_EXPECTED_AMT &lt;dbl&gt; 3843358</span></span>
<span><span class="co">#&gt; $ MORT_VARIANCE_AMT &lt;dbl&gt; 148007176380</span></span>
<span><span class="co">#&gt; $ CNT_AE_RATIO      &lt;dbl&gt; 1.22844</span></span>
<span><span class="co">#&gt; $ AMT_AE_RATIO      &lt;dbl&gt; 1.20988</span></span></code></pre></div>
<p>Using expstudy, the code to produce the same output is as follows:</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">mortexp</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="va">summarise_measures</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="va">mutate_metrics</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="va">glimpse</span></span>
<span><span class="co">#&gt; Rows: 1</span></span>
<span><span class="co">#&gt; Columns: 18</span></span>
<span><span class="co">#&gt; $ MORT_ACTUAL_CNT   &lt;dbl&gt; 315</span></span>
<span><span class="co">#&gt; $ MORT_EXPOSURE_CNT &lt;dbl&gt; 14295.43</span></span>
<span><span class="co">#&gt; $ MORT_EXPECTED_CNT &lt;dbl&gt; 256.4227</span></span>
<span><span class="co">#&gt; $ MORT_VARIANCE_CNT &lt;dbl&gt; 255.9583</span></span>
<span><span class="co">#&gt; $ MORT_ACTUAL_AMT   &lt;dbl&gt; 4650000</span></span>
<span><span class="co">#&gt; $ MORT_EXPOSURE_AMT &lt;dbl&gt; 210257356</span></span>
<span><span class="co">#&gt; $ MORT_EXPECTED_AMT &lt;dbl&gt; 3843358</span></span>
<span><span class="co">#&gt; $ MORT_VARIANCE_AMT &lt;dbl&gt; 148007176380</span></span>
<span><span class="co">#&gt; $ AVG_OBSRV_CNT     &lt;dbl&gt; 0.02203501</span></span>
<span><span class="co">#&gt; $ AVG_EXPEC_CNT     &lt;dbl&gt; 0.01793739</span></span>
<span><span class="co">#&gt; $ CI_FCTR_CNT       &lt;dbl&gt; 0.002193488</span></span>
<span><span class="co">#&gt; $ AE_RATIO_CNT      &lt;dbl&gt; 1.22844</span></span>
<span><span class="co">#&gt; $ CREDIBILITY_CNT   &lt;dbl&gt; 0.4088781</span></span>
<span><span class="co">#&gt; $ AVG_OBSRV_AMT     &lt;dbl&gt; 0.02211575</span></span>
<span><span class="co">#&gt; $ AVG_EXPEC_AMT     &lt;dbl&gt; 0.0182793</span></span>
<span><span class="co">#&gt; $ CI_FCTR_AMT       &lt;dbl&gt; 0.003586231</span></span>
<span><span class="co">#&gt; $ AE_RATIO_AMT      &lt;dbl&gt; 1.20988</span></span>
<span><span class="co">#&gt; $ CREDIBILITY_AMT   &lt;dbl&gt; 0.2548539</span></span></code></pre></div>
<p>The runtimes of each do not significantly differ, so there is no performance degradation with the code improvement:</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/joshuaulrich/microbenchmark/" class="external-link">microbenchmark</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://ggplot2.tidyverse.org" class="external-link">ggplot2</a></span><span class="op">)</span></span>
<span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/autoplot.html" class="external-link">autoplot</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/pkg/microbenchmark/man/microbenchmark.html" class="external-link">microbenchmark</a></span><span class="op">(</span></span>
<span>  dplyr_only <span class="op">=</span> <span class="va">mortexp</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html" class="external-link">summarise</a></span><span class="op">(</span></span>
<span>    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/across.html" class="external-link">across</a></span><span class="op">(</span></span>
<span>      .cols <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span></span>
<span>        <span class="va">MORT_EXPOSURE_CNT</span>, <span class="va">MORT_ACTUAL_CNT</span>, <span class="va">MORT_EXPECTED_CNT</span>, </span>
<span>        <span class="va">MORT_VARIANCE_CNT</span>, <span class="va">MORT_EXPOSURE_AMT</span>, <span class="va">MORT_ACTUAL_AMT</span>, </span>
<span>        <span class="va">MORT_EXPECTED_AMT</span>, <span class="va">MORT_VARIANCE_AMT</span></span>
<span>      <span class="op">)</span>,</span>
<span>      .fns <span class="op">=</span> \<span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html" class="external-link">sum</a></span><span class="op">(</span><span class="va">x</span>, na.rm <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span>    <span class="op">)</span></span>
<span>  <span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span></span>
<span>    CNT_AE_RATIO <span class="op">=</span> <span class="va">MORT_ACTUAL_CNT</span> <span class="op">/</span> <span class="va">MORT_EXPECTED_CNT</span>,</span>
<span>    AMT_AE_RATIO <span class="op">=</span> <span class="va">MORT_ACTUAL_AMT</span> <span class="op">/</span> <span class="va">MORT_EXPECTED_AMT</span></span>
<span>  <span class="op">)</span>,</span>
<span>  expstudy <span class="op">=</span> <span class="va">mortexp</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="va">summarise_measures</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="va">mutate_metrics</span></span>
<span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p><img src="reference/figures/README-unnamed-chunk-8-1.png"></p>
<p>Note that expstudy is calculating more than the AE ratio metric. Without those additional metrics, performance with expstudy actually surpasses performance without:</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/autoplot.html" class="external-link">autoplot</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/pkg/microbenchmark/man/microbenchmark.html" class="external-link">microbenchmark</a></span><span class="op">(</span></span>
<span>  dplyr_only <span class="op">=</span> <span class="va">mortexp</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html" class="external-link">summarise</a></span><span class="op">(</span></span>
<span>    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/across.html" class="external-link">across</a></span><span class="op">(</span></span>
<span>      .cols <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span></span>
<span>        <span class="va">MORT_EXPOSURE_CNT</span>, <span class="va">MORT_ACTUAL_CNT</span>, <span class="va">MORT_EXPECTED_CNT</span>, </span>
<span>        <span class="va">MORT_VARIANCE_CNT</span>, <span class="va">MORT_EXPOSURE_AMT</span>, <span class="va">MORT_ACTUAL_AMT</span>, </span>
<span>        <span class="va">MORT_EXPECTED_AMT</span>, <span class="va">MORT_VARIANCE_AMT</span></span>
<span>      <span class="op">)</span>,</span>
<span>      .fns <span class="op">=</span> \<span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html" class="external-link">sum</a></span><span class="op">(</span><span class="va">x</span>, na.rm <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span>    <span class="op">)</span></span>
<span>  <span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span></span>
<span>    CNT_AE_RATIO <span class="op">=</span> <span class="va">MORT_ACTUAL_CNT</span> <span class="op">/</span> <span class="va">MORT_EXPECTED_CNT</span>,</span>
<span>    AMT_AE_RATIO <span class="op">=</span> <span class="va">MORT_ACTUAL_AMT</span> <span class="op">/</span> <span class="va">MORT_EXPECTED_AMT</span></span>
<span>  <span class="op">)</span>,</span>
<span>  expstudy <span class="op">=</span> <span class="va">mortexp</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>    <span class="va">summarise_measures</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>    <span class="fu"><a href="reference/mutate_metrics.html">mutate_metrics</a></span><span class="op">(</span></span>
<span>      metrics <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>AE_RATIO <span class="op">=</span> <span class="va">ae_ratio</span><span class="op">)</span></span>
<span>    <span class="op">)</span></span>
<span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p><img src="reference/figures/README-unnamed-chunk-9-1.png"></p>
<p>Whenever there is not enough credibility for a company to write their own assumption, adjustment factors are often used to incorporate emerging experience. expstudy provides a function to determine factor adjustments for each provided set of measures using a variety of methods.</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">mortexp</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">group_by</a></span><span class="op">(</span></span>
<span>    <span class="va">GENDER</span>,</span>
<span>    <span class="va">SMOKING_STATUS</span></span>
<span>  <span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="reference/compute_fct_adjs.html">compute_fct_adjs</a></span><span class="op">(</span></span>
<span>    expected_rate <span class="op">=</span> <span class="va">EXPECTED_MORTALITY_RT</span>,</span>
<span>    amount_scalar <span class="op">=</span> <span class="va">FACE_AMOUNT</span>,</span>
<span>    method <span class="op">=</span> <span class="st">'sequential'</span></span>
<span>  <span class="op">)</span></span>
<span><span class="co">#&gt; $CNT</span></span>
<span><span class="co">#&gt;   SMOKING_STATUS GENDER GENDER_FCT_ADJ SMOKING_STATUS_FCT_ADJ COMPOSITE_FCT_ADJ</span></span>
<span><span class="co">#&gt; 1     NON-SMOKER FEMALE       1.271511              1.0194734          1.296272</span></span>
<span><span class="co">#&gt; 2     NON-SMOKER   MALE       1.193514              1.0194734          1.216755</span></span>
<span><span class="co">#&gt; 3         SMOKER FEMALE       1.271511              0.9515988          1.209968</span></span>
<span><span class="co">#&gt; 4         SMOKER   MALE       1.193514              0.9515988          1.135746</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $AMT</span></span>
<span><span class="co">#&gt;   SMOKING_STATUS GENDER GENDER_FCT_ADJ SMOKING_STATUS_FCT_ADJ COMPOSITE_FCT_ADJ</span></span>
<span><span class="co">#&gt; 1     NON-SMOKER FEMALE       1.307949               0.998288          1.305710</span></span>
<span><span class="co">#&gt; 2     NON-SMOKER   MALE       1.129454               0.998288          1.127520</span></span>
<span><span class="co">#&gt; 3         SMOKER FEMALE       1.307949               1.004059          1.313259</span></span>
<span><span class="co">#&gt; 4         SMOKER   MALE       1.129454               1.004059          1.134039</span></span></code></pre></div>
<p>Refer to each functionâ€™s documentation page for additional detail.</p>
</div>
<div class="section level1">
<h1 id="code-of-conduct">Code of Conduct<a class="anchor" aria-label="anchor" href="#code-of-conduct"></a>
</h1>
<p>Please note that the expstudy project is released with a <a href="https://cb12991.github.io/expstudy/CODE_OF_CONDUCT.html">Contributor Code of Conduct</a>. By contributing to this project, you agree to abide by its terms.</p>
</div>

  </main><aside class="col-md-3"><div class="links">
<h2 data-toc-skip>Links</h2>
<ul class="list-unstyled">
<li><a href="https://cloud.r-project.org/package=expstudy" class="external-link">View on CRAN</a></li>
<li><a href="https://github.com/cb12991/expstudy/" class="external-link">Browse source code</a></li>
<li><a href="https://github.com/cb12991/expstudy/issues" class="external-link">Report a bug</a></li>
</ul>
</div>

<div class="license">
<h2 data-toc-skip>License</h2>
<ul class="list-unstyled">
<li><a href="LICENSE.html">Full license</a></li>
<li><small>GPL (&gt;= 3) + file <a href="LICENSE-text.html">LICENSE</a></small></li>
</ul>
</div>

<div class="community">
<h2 data-toc-skip>Community</h2>
<ul class="list-unstyled">
<li><a href="CONTRIBUTING.html">Contributing guide</a></li>
<li><a href="CODE_OF_CONDUCT.html">Code of conduct</a></li>
<li><a href="SUPPORT.html">Getting help</a></li>
</ul>
</div>

<div class="citation">
<h2 data-toc-skip>Citation</h2>
<ul class="list-unstyled">
<li><a href="authors.html#citation">Citing expstudy</a></li>
</ul>
</div>

<div class="developers">
<h2 data-toc-skip>Developers</h2>
<ul class="list-unstyled">
<li>Cody Buehler <br><small class="roles"> Author, maintainer </small>  </li>
</ul>
</div>

<div class="dev-status">
<h2 data-toc-skip>Dev status</h2>
<ul class="list-unstyled">
<li><a href="https://CRAN.R-project.org/package=expstudy" class="external-link"><img src="https://www.r-pkg.org/badges/version/expstudy.png" alt="CRAN status"></a></li>
<li><a href="https://github.com/cb12991/expstudy/actions/workflows/R-CMD-check.yaml" class="external-link"><img src="https://github.com/cb12991/expstudy/actions/workflows/R-CMD-check.yaml/badge.svg" alt="R-CMD-check"></a></li>
<li><a href="https://github.com/cb12991/expstudy/actions/workflows/test-coverage.yaml" class="external-link"><img src="https://github.com/cb12991/expstudy/actions/workflows/test-coverage.yaml/badge.svg" alt="test-coverage"></a></li>
<li><a href="https://app.codecov.io/gh/cb12991/expstudy?branch=main" class="external-link"><img src="https://codecov.io/gh/cb12991/expstudy/branch/main/graph/badge.svg" alt="Codecov test coverage"></a></li>
<li><a href="https://cranlogs.r-pkg.org/badges/grand-total/expstudy" class="external-link"><img src="https://cranlogs.r-pkg.org/badges/grand-total/expstudy.svg" alt="CRAN RStudio mirror downloads"></a></li>
</ul>
</div>

  </aside>
</div>


    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by Cody Buehler.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
