---
output: 
  github_document:
    df_print: paged
---

<!-- README.md is generated from README.Rmd. Please edit that file -->

```{r, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>",
  fig.path = "man/figures/README-",
  out.width = "100%"
)
```

# expstudy

<!-- badges: start -->
[![R-CMD-check](https://github.com/cb12991/expstudy/workflows/R-CMD-check/badge.svg)](https://github.com/cb12991/expstudy/actions)
<!-- badges: end -->

The goal of __expstudy__ is to provide a set of tools to quickly conduct analysis of an experience study. Commonly used techniques (such as actual-to-expected analysis) are generalized and streamlined so that repetitive coding is avoided. 

## Installation

```{r, eval = FALSE} 
# This package has not yet been submitted to CRAN, however,
# you can install the development version from GitHub:

# install.packages('devtools')
devtools::install_github('cb12991/expstudy')
```

## Usage

```{r example}
library(expstudy)
```

First you need a dataset that can be used for an experience study:

```{r}
dataset <- data.frame(
  GENDER = sample(c('MALE','FEMALE'), size = 10000, replace = TRUE),
  ATTAINED_AGE = sample(
    c('Under 40', '40 to 65', '65+'), size = 10000, replace = TRUE
  ),
  RECORD_YEARSPAN = runif(10000, max = 5),
  EXPECTED_DEATHS = runif(10000, max = 5),
  ACTUAL_DEATHS = runif(10000, max = 5)
)
```

Now you can convert to an `expstudy` object:

```{r}
# Only need to specify which variables correlate to metric variable `actuals`, 
# `expecteds`, and `exposures`. `variances` and `keys` are beneficial, but not
# required. 

es <- expstudy(
  data = dataset,
  actuals = ACTUAL_DEATHS,
  expecteds = EXPECTED_DEATHS,
  exposures = RECORD_YEARSPAN
)
```

With this `expstudy` object, a quick example can be shown using `compile_results()`:

```{r}
# We will supply only the dataset and grouping variables to use for the 
# summaries to generate a more robust list of results. 

results <- compile_results(
  expstudy = es,
  GENDER,
  ATTAINED_AGE
)
```

The `compile_results()` function combines many `expstudy` functions to produce many summaries easily. You can review and trim the summaries down to what you want without much effort. Since nothing other than the potential groupings were provided, `coompile_results()` will generate a nested list of summaries:



An unformatted summary can be used for subsequent analysis, or a formatted summary can be quickly and simply inserted into a report for communicative purposes. 
